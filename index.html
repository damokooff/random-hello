<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Bonjour al√©atoire</title>
    <style>
        body {
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-size: 40px;
            font-family: Arial, sans-serif;
            transition: background-color 0.3s, color 0.3s;
            text-align: center;
        }

        body.dark {
            background-color: #0f0f0f;
            color: #ffffff;
        }

        body.light {
            background-color: #ffffff;
            color: #000000;
        }

        #toggleTheme, #showIndex {
            position: fixed;
            top: 15px;
            padding: 8px 14px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
        }

        #toggleTheme {
            right: 15px;
        }

        #showIndex {
            left: 15px;
        }

        body.dark #toggleTheme, body.dark #showIndex {
            background: #ffffff;
            color: #000000;
        }

        body.light #toggleTheme, body.light #showIndex {
            background: #000000;
            color: #ffffff;
        }

        #languagePrompt {
            margin-top: 15px;
            font-size: 16px;
        }

        #languagePrompt button {
            margin: 0 5px;
            padding: 5px 10px;
            cursor: pointer;
        }

        #indexList {
            margin-top: 20px;
            font-size: 18px;
            text-align: left;
            max-height: 50vh;
            overflow-y: auto;
            width: 80%;
        }
    </style>
</head>
<body class="dark">

<button id="toggleTheme">‚òÄÔ∏è</button>
<button id="showIndex">Index</button>

<div id="bonjour"></div>
<div id="languagePrompt"></div>
<div id="indexList"></div>

<script>
    const bonjours = [
        "Bonjour", "Hello", "Good morning", "Buenos d√≠as", "Buongiorno",
        "Guten Tag", "Bom dia", "Goedendag", "God morgon", "God dag",
        "„Åì„Çì„Å´„Å°„ÅØ", "ÏïàÎÖïÌïòÏÑ∏Ïöî", "ŸÖÿ±ÿ≠ÿ®ÿß", "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ", "ÊÇ®Â•Ω",
        "Merhaba", "ŒìŒµŒπŒ¨ œÉŒ±œÇ", "◊©◊ú◊ï◊ù", "‡§®‡§Æ‡§∏‡•ç‡§§‡•á", "Bonjour", "Bon matin"
    ];

    // -----------------------------
    // THEME
    // -----------------------------
    const body = document.body;
    const toggleButton = document.getElementById("toggleTheme");
    const indexButton = document.getElementById("showIndex");
    const savedTheme = localStorage.getItem("theme") || "dark";
    body.className = savedTheme;
    toggleButton.textContent = savedTheme === "dark" ? "‚òÄÔ∏è" : "üåô";

    toggleButton.onclick = () => {
        const isDark = body.classList.contains("dark");
        body.className = isDark ? "light" : "dark";
        localStorage.setItem("theme", body.className);
        toggleButton.textContent = isDark ? "üåô" : "‚òÄÔ∏è";
    };

    // -----------------------------
    // BONJOUR & LOCALSTORAGE
    // -----------------------------
    const bonjourDiv = document.getElementById("bonjour");
    const indexListDiv = document.getElementById("indexList");

    // R√©cup√©ration des compteurs depuis localStorage
    let bonjourCounts = JSON.parse(localStorage.getItem("bonjourCounts") || "{}");
    let totalVisits = parseInt(localStorage.getItem("totalVisits") || "0") + 1;
    localStorage.setItem("totalVisits", totalVisits);

    // Choix al√©atoire d'un bonjour
    const bonjour = bonjours[Math.floor(Math.random() * bonjours.length)];
    bonjourDiv.textContent = bonjour;

    // Mise √† jour du compteur
    bonjourCounts[bonjour] = (bonjourCounts[bonjour] || 0) + 1;
    localStorage.setItem("bonjourCounts", JSON.stringify(bonjourCounts));

    // -----------------------------
    // SUGGESTION DE LANGUE SI PREMIERE VISITE
    // -----------------------------
    const languagePromptDiv = document.getElementById("languagePrompt");
    if (totalVisits === 1) {
        languagePromptDiv.innerHTML = `
            Souhaitez-vous changer la langue du site ?<br>
            <button onclick="setLang('fr')">Fran√ßais</button>
            <button onclick="setLang('nl')">N√©erlandais</button>
            <button onclick="setLang('es')">Espagnol</button>
            <button onclick="setLang('en')">Anglais</button>
        `;
    }

    function setLang(lang) {
        localStorage.setItem("siteLang", lang);
        languagePromptDiv.innerHTML = `Langue d√©finie sur <strong>${lang.toUpperCase()}</strong>.`;
    }

    // -----------------------------
    // BOUTON INDEX
    // -----------------------------
    indexButton.onclick = () => {
        let html = "<strong>Index des bonjours :</strong><br>";
        for (const [key, value] of Object.entries(bonjourCounts)) {
            html += `${key} : ${value} fois<br>`;
        }
        indexListDiv.innerHTML = html;
    };
</script>

</body>
</html>
